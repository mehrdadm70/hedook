<mat-sidenav-container class="admin-container">
  <!-- Sidebar Navigation -->
  <mat-sidenav 
    #sidenav
    [mode]="isHandset() ? 'over' : 'side'"
    [opened]="sidenavOpened()"
    position="end"
    class="admin-sidenav">
    
    <!-- Admin Profile Section -->
    <div class="admin-profile">
      <div class="profile-avatar">
        <mat-icon class="avatar-icon">account_circle</mat-icon>
      </div>
      <div class="profile-info">
        <h3 class="profile-name">{{ adminName() }}</h3>
        <p class="profile-role">{{ currentAdmin()?.role }}</p>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Navigation Menu -->
    <mat-nav-list class="admin-nav">
      @for (item of visibleNavigationItems(); track item.route) {
        @if (item.children) {
          <!-- Menu with children -->
          <mat-list-item class="nav-item-parent">
            <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
            <span matListItemTitle>{{ item.label }}</span>
            <!-- <mat-icon matListItemMeta>expand_more</mat-icon> -->
          </mat-list-item>
          
          @for (child of item.children; track child.route) {
            <mat-list-item 
              class="nav-item-child"
                          (click)="navigateTo(child.route)"
            [class.active]="isRouteActive(child.route)">
              <mat-icon matListItemIcon class="child-icon">{{ child.icon }}</mat-icon>
              <span matListItemTitle>{{ child.label }}</span>
            </mat-list-item>
          }
        } @else {
          <!-- Simple menu item -->
          <mat-list-item 
            class="nav-item"
            (click)="navigateTo(item.route)"
            [class.active]="isRouteActive(item.route)">
            <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
            <span matListItemTitle>{{ item.label }}</span>
          </mat-list-item>
        }
      }
      
      <mat-divider class="nav-divider"></mat-divider>
      
      <!-- Quick Actions -->
      <mat-list-item (click)="goToMainSite()" class="nav-item">
        <mat-icon matListItemIcon>public</mat-icon>
        <span matListItemTitle>مشاهده سایت</span>
      </mat-list-item>
      
      <mat-list-item (click)="logout()" class="nav-item logout-item">
        <mat-icon matListItemIcon>logout</mat-icon>
        <span matListItemTitle>خروج</span>
      </mat-list-item>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Main Content Area -->
  <mat-sidenav-content class="admin-content">
    <!-- Top Toolbar -->
    <mat-toolbar class="admin-toolbar" color="primary">


      
      <span class="toolbar-spacer"></span>
      <span class="toolbar-title">پنل مدیریت هدوک</span>
      <button 
      mat-icon-button 
      (click)="toggleSidenav()" 
      class="menu-button"
      aria-label="Toggle navigation">
      <mat-icon>menu</mat-icon>
    </button>
    
      <mat-menu #adminMenu="matMenu" class="admin-menu">
        <button mat-menu-item disabled>
          <mat-icon>person</mat-icon>
          <span>{{ adminName() }}</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="goToMainSite()">
          <mat-icon>public</mat-icon>
          <span>مشاهده سایت</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>خروج</span>
        </button>
      </mat-menu>
    </mat-toolbar>

    <!-- Page Content -->
    <div class="admin-page-content">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
