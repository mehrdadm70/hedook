<div class="user-form-dialog">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        {{ isEditMode ? 'ویرایش کاربر' : 'افزودن کاربر جدید' }}
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
        <!-- Basic Information Section -->
        <div class="form-section">
          <h3>اطلاعات پایه</h3>
          
          <div class="form-row">
            <!-- First Name -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>نام</mat-label>
              <input matInput formControlName="firstName" placeholder="نام کاربر">
              <mat-error *ngIf="userForm.get('firstName')?.hasError('required')">
                نام الزامی است
              </mat-error>
              <mat-error *ngIf="userForm.get('firstName')?.hasError('minlength')">
                نام باید حداقل 2 کاراکتر باشد
              </mat-error>
            </mat-form-field>

            <!-- Last Name -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>نام خانوادگی</mat-label>
              <input matInput formControlName="lastName" placeholder="نام خانوادگی کاربر">
              <mat-error *ngIf="userForm.get('lastName')?.hasError('required')">
                نام خانوادگی الزامی است
              </mat-error>
              <mat-error *ngIf="userForm.get('lastName')?.hasError('minlength')">
                نام خانوادگی باید حداقل 2 کاراکتر باشد
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <!-- Email -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>ایمیل</mat-label>
              <input matInput formControlName="email" type="email" placeholder="example@email.com">
              <mat-error *ngIf="userForm.get('email')?.hasError('required')">
                ایمیل الزامی است
              </mat-error>
              <mat-error *ngIf="userForm.get('email')?.hasError('email')">
                فرمت ایمیل صحیح نیست
              </mat-error>
            </mat-form-field>

            <!-- Phone -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>شماره تلفن</mat-label>
              <input matInput formControlName="phone" placeholder="09123456789">
            </mat-form-field>
          </div>

          <div class="form-row">
            <!-- Password -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>{{ isEditMode ? 'رمز عبور جدید (اختیاری)' : 'رمز عبور' }}</mat-label>
              <input matInput formControlName="password" type="password" placeholder="رمز عبور">
              <mat-error *ngIf="!isEditMode && userForm.get('password')?.hasError('required')">
                رمز عبور الزامی است
              </mat-error>
              <mat-error *ngIf="userForm.get('password')?.hasError('minlength')">
                رمز عبور باید حداقل 6 کاراکتر باشد
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <!-- User Settings Section -->
        <div class="form-section">
          <h3>تنظیمات کاربر</h3>
          
          <div class="form-row">
            <!-- Role -->
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>نقش</mat-label>
              <mat-select formControlName="role">
                @for (role of roleOptions; track role.value) {
                  <mat-option [value]="role.value">{{ role.label }}</mat-option>
                }
              </mat-select>
              <mat-error *ngIf="userForm.get('role')?.hasError('required')">
                نقش الزامی است
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-row">
            <!-- Active Status -->
            <mat-checkbox formControlName="isActive" class="checkbox-field">
              کاربر فعال است
            </mat-checkbox>
          </div>
        </div>
      </form>
    </mat-card-content>

    <mat-card-actions class="dialog-actions">
      <button mat-button (click)="onCancel()" type="button">
        انصراف
      </button>
      <button 
        mat-raised-button 
        color="primary" 
        (click)="onSubmit()" 
        [disabled]="!isFormValid"
        type="submit">
        {{ submitButtonText }}
      </button>
    </mat-card-actions>
  </mat-card>
</div> 