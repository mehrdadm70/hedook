<!-- Product Card -->
<div class="group relative bg-white rounded-3xl shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 cursor-pointer overflow-hidden border border-gray-100" (click)="onProductClick()">
  
  <!-- Product Image Container -->
  <div class="relative h-48 lg:h-56 overflow-hidden">
    <img 
      [src]="product().images[0] || 'assets/images/placeholder.jpg'" 
      [alt]="product().name" 
      class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
    
    <!-- Discount Badge -->
    <div *ngIf="discountPercentage() > 0" 
         class="absolute top-3 right-3 bg-gradient-to-r from-red-500 to-pink-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg animate-pulse">
      {{ discountPercentage() }}% تخفیف
    </div>
    
    <!-- Add to Cart Button -->
    <button 
      mat-fab 
      class="absolute bottom-3 left-3 w-12 h-12 bg-gradient-to-r from-orange-400 to-orange-600 text-white shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300 opacity-0 group-hover:opacity-100"
      (click)="onAddToCart($event)"
      [disabled]="product().stock === 0">
      <mat-icon class="text-xl">add_shopping_cart</mat-icon>
    </button>
    
    <!-- Stock Status Overlay -->
    <div *ngIf="product().stock === 0" 
         class="absolute inset-0 bg-black/50 flex items-center justify-center">
      <div class="bg-white rounded-full px-4 py-2 text-red-600 font-bold text-sm">
        ناموجود
      </div>
    </div>
  </div>

  <!-- Product Content -->
  <div class="p-6 space-y-4">
    <!-- Product Name -->
    <h3 class="text-lg font-bold text-gray-800 line-clamp-2 leading-tight group-hover:text-cyan-600 transition-colors">
      {{ product().name }}
    </h3>
    
    <!-- Brand -->
    <p class="text-sm text-gray-500 font-medium">
      {{ product().brand }}
    </p>
    
    <!-- Skills -->
    <div class="flex flex-wrap gap-2">
      <span 
        *ngFor="let skill of product().skills.slice(0, 3)" 
        class="px-3 py-1 bg-gradient-to-r from-cyan-100 to-blue-100 text-cyan-700 text-xs font-medium rounded-full border border-cyan-200">
        {{ skill }}
      </span>
    </div>
    
    <!-- Age Range -->
    <div class="flex items-center space-x-2 rtl:space-x-reverse">
      <div class="w-8 h-8 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center">
        <mat-icon class="text-white text-sm">child_care</mat-icon>
      </div>
      <span class="text-sm text-gray-600 font-medium">
        {{ product().ageRange.min }}-{{ product().ageRange.max }} سال
      </span>
    </div>
    
    <!-- Rating -->
    <div class="flex items-center space-x-2 rtl:space-x-reverse">
      <div class="flex space-x-1 rtl:space-x-reverse">
        <mat-icon 
          *ngFor="let star of ratingStars()" 
          [class.text-yellow-400]="star.filled"
          [class.text-gray-300]="!star.filled"
          class="text-lg">
          {{ star.filled ? 'star' : 'star_border' }}
        </mat-icon>
      </div>
      <span class="text-sm text-gray-600 font-medium">
        {{ product().rating }}/5
      </span>
    </div>
    
    <!-- Price -->
    <div class="flex items-center space-x-3 rtl:space-x-reverse">
      <span class="text-xl font-bold text-green-600">
        {{ formattedPrice() }}
      </span>
      <span *ngIf="hasDiscount()" class="text-sm text-gray-400 line-through">
        {{ formattedOriginalPrice() }}
      </span>
    </div>
    
    <!-- Stock Info -->
    <div class="flex items-center space-x-2 rtl:space-x-reverse">
      <div class="w-6 h-6 rounded-full flex items-center justify-center"
           [class.bg-green-100]="product().stock > 0"
           [class.bg-red-100]="product().stock === 0">
        <mat-icon 
          [class.text-green-600]="product().stock > 0"
          [class.text-red-600]="product().stock === 0"
          class="text-sm">
          {{ product().stock > 0 ? 'inventory' : 'inventory_2' }}
        </mat-icon>
      </div>
      <span 
        [class.text-green-600]="product().stock > 0"
        [class.text-red-600]="product().stock === 0"
        class="text-sm font-medium">
        {{ product().stock > 0 ? 'موجود در انبار' : 'ناموجود' }}
      </span>
    </div>
  </div>
  
  <!-- Hover Effect Overlay -->
  <div class="absolute inset-0 bg-gradient-to-t from-cyan-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
</div>
