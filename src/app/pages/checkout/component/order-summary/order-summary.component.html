<!-- Order Summary Sidebar -->
<div class="lg:col-span-1">
  <mat-card class="sticky top-8">
    <mat-card-header>
      <mat-card-title>Ø®Ù„Ø§ØµÙ‡ Ø³ÙØ§Ø±Ø´</mat-card-title>
    </mat-card-header>
    
    <mat-card-content class="space-y-4">
      
      <!-- Cart Items -->
      <div class="space-y-3">
        @for (item of cartItems(); track item.product.id) {
          <div class="flex items-center space-x-3 space-x-reverse">
            <img [src]="item.product.images[0]" 
                 [alt]="item.product.name" 
                 class="w-16 h-16 object-cover rounded-lg">
            <div class="flex-1">
              <div class="font-medium text-sm">{{ item.product.name }}</div>
              <div class="text-gray-600 text-sm">ØªØ¹Ø¯Ø§Ø¯: {{ item.quantity }}</div>
              <div class="font-bold text-sm">{{ formatPrice(item.product.price * item.quantity) }}</div>
            </div>
          </div>
        }
      </div>

      <mat-divider></mat-divider>

      <!-- Price Breakdown -->
      <div class="space-y-2">
        <div class="flex justify-between">
          <span>Ø¬Ù…Ø¹ Ú©Ù„ Ù…Ø­ØµÙˆÙ„Ø§Øª:</span>
          <span>{{ formatPrice(totalPrice()) }}</span>
        </div>
        
        @if (selectedShipping()) {
          <div class="flex justify-between">
            <span>Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø±Ø³Ø§Ù„:</span>
            <span>{{ formatPrice(selectedShipping()!.price) }}</span>
          </div>
        }
        
        @if (selectedPackaging() && selectedPackaging()!.price > 0) {
          <div class="flex justify-between">
            <span>Ø¨Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</span>
            <span>{{ formatPrice(selectedPackaging()!.price) }}</span>
          </div>
        }
        
        @if (selectedGiftDesign() && selectedGiftDesign()!.price > 0) {
          <div class="flex justify-between">
            <span>Ø·Ø±Ø­ Ú©Ø§Ø¯Ùˆ:</span>
            <span>{{ formatPrice(selectedGiftDesign()!.price) }}</span>
          </div>
        }
        
        <mat-divider></mat-divider>
        
        <div class="flex justify-between font-bold text-lg">
          <span>Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ:</span>
          <span class="text-green-600">{{ formatPrice(finalTotal()) }}</span>
        </div>
      </div>

      <!-- Gift Notice -->
      @if (isGift()) {
        <div class="bg-pink-50 border border-pink-200 rounded-lg p-3">
          <div class="flex items-center">
            <span class="text-2xl mr-2">ğŸ</span>
            <span class="text-pink-800 text-sm">Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´ Ø¨Ù‡ ØµÙˆØ±Øª Ù‡Ø¯ÛŒÙ‡ Ø§Ø±Ø³Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯</span>
          </div>
          @if (giftMessage()) {
            <div class="mt-2 text-xs text-pink-700">
              Ù¾ÛŒØ§Ù… Ù‡Ø¯ÛŒÙ‡: "{{ giftMessage() }}"
            </div>
          }
        </div>
      }

      <!-- Delivery Info -->
      @if (selectedShipping() && estimatedDelivery()) {
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
          <div class="flex items-center">
            <mat-icon class="text-blue-500 mr-2">schedule</mat-icon>
            <div>
              <div class="text-blue-900 text-sm font-medium">ØªØ®Ù…ÛŒÙ† ØªØ­ÙˆÛŒÙ„</div>
              <div class="text-blue-700 text-sm">{{ estimatedDelivery() }}</div>
            </div>
          </div>
        </div>
      }

    </mat-card-content>
  </mat-card>

  <!-- Back to Cart -->
  <div class="mt-4">
    <button mat-stroked-button (click)="onGoToCart()" class="w-full">
      <mat-icon class="mr-2">shopping_cart</mat-icon>
      Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
    </button>
  </div>

</div>
